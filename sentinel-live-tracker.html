<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üõ°Ô∏è SENTINEL Live Tracker - SAR</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
      background: #0a0e1a;
      color: #fff;
      overflow-x: hidden;
      min-height: 100vh;
    }

    /* Grid Background Effect */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background:
        linear-gradient(90deg, rgba(59, 130, 246, 0.05) 1px, transparent 1px),
        linear-gradient(rgba(59, 130, 246, 0.05) 1px, transparent 1px);
      background-size: 50px 50px;
      pointer-events: none;
      z-index: 0;
    }

    .container {
      position: relative;
      z-index: 1;
      max-width: 1800px;
      margin: 0 auto;
      padding: 20px;
    }

    /* Header */
    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 24px;
      background: rgba(17, 24, 39, 0.8);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(59, 130, 246, 0.2);
      border-radius: 16px;
      margin-bottom: 20px;
      box-shadow: 0 0 40px rgba(59, 130, 246, 0.1);
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .logo-icon {
      font-size: 40px;
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.1); opacity: 0.8; }
    }

    .logo-text h1 {
      font-size: 28px;
      font-weight: 700;
      background: linear-gradient(135deg, #3b82f6, #8b5cf6);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 4px;
    }

    .logo-text p {
      font-size: 14px;
      color: #94a3b8;
    }

    .status-badge {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 12px 24px;
      background: rgba(16, 185, 129, 0.1);
      border: 2px solid #10b981;
      border-radius: 50px;
      font-weight: 600;
      box-shadow: 0 0 20px rgba(16, 185, 129, 0.3);
    }

    .status-dot {
      width: 10px;
      height: 10px;
      background: #10b981;
      border-radius: 50%;
      animation: blink 1s ease-in-out infinite;
    }

    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.3; }
    }

    /* Main Grid */
    .main-grid {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 20px;
      margin-bottom: 20px;
    }

    /* Cards */
    .card {
      background: rgba(17, 24, 39, 0.8);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(59, 130, 246, 0.2);
      border-radius: 16px;
      padding: 24px;
      box-shadow: 0 0 40px rgba(0, 0, 0, 0.5);
      transition: all 0.3s ease;
    }

    .card:hover {
      transform: translateY(-4px);
      box-shadow: 0 0 60px rgba(59, 130, 246, 0.3);
      border-color: rgba(59, 130, 246, 0.4);
    }

    .card-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 20px;
      padding-bottom: 16px;
      border-bottom: 1px solid rgba(59, 130, 246, 0.2);
    }

    .card-icon {
      font-size: 32px;
    }

    .card-title {
      font-size: 18px;
      font-weight: 600;
      color: #fff;
    }

    /* Stats */
    .stat-value {
      font-size: 48px;
      font-weight: 700;
      background: linear-gradient(135deg, #3b82f6, #8b5cf6);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 8px;
    }

    .stat-label {
      font-size: 14px;
      color: #94a3b8;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .stat-change {
      font-size: 12px;
      color: #10b981;
      margin-top: 8px;
    }

    /* Activity Timeline */
    .timeline {
      max-height: 400px;
      overflow-y: auto;
      padding-right: 12px;
    }

    .timeline::-webkit-scrollbar {
      width: 6px;
    }

    .timeline::-webkit-scrollbar-track {
      background: rgba(59, 130, 246, 0.1);
      border-radius: 3px;
    }

    .timeline::-webkit-scrollbar-thumb {
      background: rgba(59, 130, 246, 0.5);
      border-radius: 3px;
    }

    .timeline-item {
      display: flex;
      gap: 16px;
      margin-bottom: 24px;
      animation: slideIn 0.5s ease-out;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateX(-20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .timeline-dot {
      min-width: 12px;
      height: 12px;
      border-radius: 50%;
      margin-top: 6px;
      box-shadow: 0 0 10px currentColor;
    }

    .timeline-dot.created { background: #10b981; }
    .timeline-dot.modified { background: #f59e0b; }
    .timeline-dot.alert { background: #ef4444; }

    .timeline-content {
      flex: 1;
    }

    .timeline-time {
      font-size: 12px;
      color: #64748b;
      margin-bottom: 4px;
    }

    .timeline-text {
      font-size: 14px;
      color: #e2e8f0;
      line-height: 1.5;
    }

    .timeline-file {
      font-family: 'Monaco', monospace;
      color: #3b82f6;
      font-size: 12px;
      margin-top: 4px;
    }

    /* File List */
    .file-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
      max-height: 350px;
      overflow-y: auto;
      padding-right: 12px;
    }

    .file-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 16px;
      background: rgba(59, 130, 246, 0.05);
      border: 1px solid rgba(59, 130, 246, 0.2);
      border-radius: 8px;
      transition: all 0.2s ease;
    }

    .file-item:hover {
      background: rgba(59, 130, 246, 0.1);
      border-color: rgba(59, 130, 246, 0.4);
    }

    .file-name {
      font-family: 'Monaco', monospace;
      font-size: 13px;
      color: #e2e8f0;
    }

    .file-badge {
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: 600;
    }

    .badge-new { background: rgba(16, 185, 129, 0.2); color: #10b981; }
    .badge-modified { background: rgba(245, 158, 11, 0.2); color: #f59e0b; }

    /* Worker Status Panel */
    .worker-panel {
      grid-column: 1 / -1;
      background: rgba(17, 24, 39, 0.9);
      border: 2px solid rgba(59, 130, 246, 0.3);
      border-radius: 16px;
      padding: 32px;
      position: relative;
      overflow: hidden;
    }

    .worker-panel::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 4px;
      background: linear-gradient(90deg, #3b82f6, #8b5cf6, #ec4899);
      animation: gradient 3s linear infinite;
      background-size: 200% 100%;
    }

    @keyframes gradient {
      0% { background-position: 0% 50%; }
      100% { background-position: 200% 50%; }
    }

    .worker-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 24px;
    }

    .worker-title {
      display: flex;
      align-items: center;
      gap: 16px;
      font-size: 24px;
      font-weight: 700;
    }

    .worker-status {
      padding: 8px 20px;
      border-radius: 50px;
      font-size: 14px;
      font-weight: 600;
    }

    .status-waiting {
      background: rgba(245, 158, 11, 0.2);
      border: 2px solid #f59e0b;
      color: #f59e0b;
    }

    .status-active {
      background: rgba(16, 185, 129, 0.2);
      border: 2px solid #10b981;
      color: #10b981;
    }

    .status-blocked {
      background: rgba(239, 68, 68, 0.2);
      border: 2px solid #ef4444;
      color: #ef4444;
    }

    .worker-details {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 20px;
    }

    .worker-stat {
      text-align: center;
      padding: 20px;
      background: rgba(59, 130, 246, 0.05);
      border-radius: 12px;
      border: 1px solid rgba(59, 130, 246, 0.2);
    }

    .worker-stat-value {
      font-size: 32px;
      font-weight: 700;
      color: #3b82f6;
      margin-bottom: 8px;
    }

    .worker-stat-label {
      font-size: 12px;
      color: #94a3b8;
      text-transform: uppercase;
    }

    /* Alerts */
    .alert {
      padding: 16px 20px;
      border-radius: 12px;
      border-left: 4px solid;
      margin-bottom: 16px;
      animation: slideIn 0.5s ease-out;
    }

    .alert-warning {
      background: rgba(245, 158, 11, 0.1);
      border-color: #f59e0b;
      color: #fbbf24;
    }

    .alert-danger {
      background: rgba(239, 68, 68, 0.1);
      border-color: #ef4444;
      color: #f87171;
    }

    .alert-success {
      background: rgba(16, 185, 129, 0.1);
      border-color: #10b981;
      color: #34d399;
    }

    /* Radar Effect */
    .radar {
      position: relative;
      width: 200px;
      height: 200px;
      margin: 0 auto;
    }

    .radar-circle {
      position: absolute;
      border: 2px solid rgba(59, 130, 246, 0.3);
      border-radius: 50%;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    .radar-circle:nth-child(1) { width: 60px; height: 60px; }
    .radar-circle:nth-child(2) { width: 120px; height: 120px; }
    .radar-circle:nth-child(3) { width: 180px; height: 180px; }

    .radar-sweep {
      position: absolute;
      width: 100%;
      height: 100%;
      background: conic-gradient(
        from 0deg,
        transparent 0deg,
        rgba(59, 130, 246, 0.5) 45deg,
        transparent 90deg
      );
      border-radius: 50%;
      animation: sweep 3s linear infinite;
    }

    @keyframes sweep {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    .radar-center {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 20px;
      height: 20px;
      background: #3b82f6;
      border-radius: 50%;
      box-shadow: 0 0 20px #3b82f6;
    }

    /* Controls */
    .controls {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }

    .btn {
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .btn-primary {
      background: linear-gradient(135deg, #3b82f6, #8b5cf6);
      color: white;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(59, 130, 246, 0.4);
    }

    .btn-danger {
      background: linear-gradient(135deg, #ef4444, #dc2626);
      color: white;
    }

    .btn-success {
      background: linear-gradient(135deg, #10b981, #059669);
      color: white;
    }

    /* Responsive */
    @media (max-width: 1400px) {
      .main-grid {
        grid-template-columns: 1fr 1fr;
      }
    }

    @media (max-width: 768px) {
      .main-grid {
        grid-template-columns: 1fr;
      }

      .worker-details {
        grid-template-columns: repeat(2, 1fr);
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Header -->
    <div class="header">
      <div class="logo">
        <div class="logo-icon">üõ°Ô∏è</div>
        <div class="logo-text">
          <h1>SENTINEL Live Tracker</h1>
          <p>Solution Argent Rapide - Surveillance en Temps R√©el</p>
        </div>
      </div>
      <div class="status-badge">
        <div class="status-dot"></div>
        <span id="sentinelStatus">ACTIF</span>
      </div>
    </div>

    <!-- Main Grid -->
    <div class="main-grid">
      <!-- Files Created -->
      <div class="card">
        <div class="card-header">
          <div class="card-icon">üìÅ</div>
          <div class="card-title">Fichiers Cr√©√©s</div>
        </div>
        <div class="stat-value" id="filesCreated">16</div>
        <div class="stat-label">Total Non Commit√©s</div>
        <div class="stat-change" id="filesChange">+4 dans les 30 derni√®res minutes</div>
      </div>

      <!-- Lines Added -->
      <div class="card">
        <div class="card-header">
          <div class="card-icon">üìù</div>
          <div class="card-title">Lignes de Code</div>
        </div>
        <div class="stat-value" id="linesAdded">2,500+</div>
        <div class="stat-label">Lignes Ajout√©es</div>
        <div class="stat-change">+600 derni√®re session</div>
      </div>

      <!-- Worker Status -->
      <div class="card">
        <div class="card-header">
          <div class="card-icon">üë∑</div>
          <div class="card-title">Statut Worker</div>
        </div>
        <div class="radar">
          <div class="radar-circle"></div>
          <div class="radar-circle"></div>
          <div class="radar-circle"></div>
          <div class="radar-sweep"></div>
          <div class="radar-center"></div>
        </div>
      </div>

      <!-- Activity Timeline -->
      <div class="card" style="grid-column: 1 / 3;">
        <div class="card-header">
          <div class="card-icon">‚è±Ô∏è</div>
          <div class="card-title">Timeline d'Activit√©</div>
        </div>
        <div class="timeline" id="timeline">
          <!-- Timeline items will be added here -->
        </div>
      </div>

      <!-- Alerts -->
      <div class="card">
        <div class="card-header">
          <div class="card-icon">üö®</div>
          <div class="card-title">Alertes</div>
        </div>
        <div id="alerts">
          <div class="alert alert-warning">
            ‚ö†Ô∏è Worker n'a pas lu les instructions
          </div>
          <div class="alert alert-warning">
            ‚ö†Ô∏è WORKER-STATUS.md non mis √† jour
          </div>
          <div class="alert alert-success">
            ‚úÖ Code de haute qualit√© d√©tect√©
          </div>
        </div>
      </div>

      <!-- Files Modified -->
      <div class="card" style="grid-column: 1 / -1;">
        <div class="card-header">
          <div class="card-icon">üìÑ</div>
          <div class="card-title">Fichiers D√©tect√©s</div>
        </div>
        <div class="file-list" id="fileList">
          <!-- Files will be added here -->
        </div>
      </div>
    </div>

    <!-- Worker Status Panel -->
    <div class="worker-panel">
      <div class="worker-header">
        <div class="worker-title">
          <span>üë∑</span>
          <span>WORKER CLAUDE - Status D√©taill√©</span>
        </div>
        <div class="worker-status status-waiting" id="workerStatusBadge">
          ‚è≥ EN ATTENTE
        </div>
      </div>

      <div class="worker-details">
        <div class="worker-stat">
          <div class="worker-stat-value" id="workerFiles">12</div>
          <div class="worker-stat-label">Fichiers Cr√©√©s</div>
        </div>
        <div class="worker-stat">
          <div class="worker-stat-value" id="workerAPIs">5</div>
          <div class="worker-stat-label">APIs Cr√©√©es</div>
        </div>
        <div class="worker-stat">
          <div class="worker-stat-value" id="workerTables">5</div>
          <div class="worker-stat-label">Tables SQL</div>
        </div>
        <div class="worker-stat">
          <div class="worker-stat-value" id="workerDocs">3</div>
          <div class="worker-stat-label">Docs G√©n√©r√©es</div>
        </div>
        <div class="worker-stat">
          <div class="worker-stat-value" id="workerCommits">0</div>
          <div class="worker-stat-label">Commits</div>
        </div>
      </div>

      <div class="controls" style="margin-top: 24px;">
        <button class="btn btn-primary" onclick="refreshData()">üîÑ Rafra√Æchir</button>
        <button class="btn btn-success" onclick="approveCommit()">‚úÖ Approuver Commit</button>
        <button class="btn btn-danger" onclick="stopWorker()">üõë STOP Worker</button>
      </div>
    </div>
  </div>

  <script>
    // Donn√©es simul√©es (√† remplacer par des vraies requ√™tes API)
    const activities = [
      { time: '18:30', type: 'created', text: 'Instructions envoy√©es au Worker', file: 'SENTINEL-MESSAGE-TO-WORKER.md' },
      { time: '18:21', type: 'created', text: 'Dashboard de test cr√©√©', file: 'public/test-memory.html' },
      { time: '18:14', type: 'created', text: 'Guide d\'installation rapide', file: 'INSTALLATION-RAPIDE-MEMOIRE.md' },
      { time: '18:13', type: 'created', text: 'Script de setup complet', file: 'scripts/setup-complete.mjs' },
      { time: '18:12', type: 'created', text: 'Syst√®me de coordination cr√©√©', file: 'COORDINATION-SYSTEM-README.md' },
      { time: '18:11', type: 'created', text: 'Guide de m√©moire g√©n√©r√©', file: 'CLAUDE-MEMORY-GUIDE.md' },
      { time: '18:09', type: 'created', text: 'Script d\'initialisation', file: 'scripts/init-claude-memory.mjs' },
      { time: '18:07', type: 'created', text: '5 APIs REST cr√©√©es', file: 'src/app/api/memory/*' },
      { time: '18:07', type: 'created', text: 'Tables SQL cr√©√©es', file: 'database/claude-memory-system.sql' },
      { time: '18:00', type: 'alert', text: 'Worker a commenc√© sans autorisation', file: null }
    ];

    const files = [
      { name: 'database/claude-memory-system.sql', status: 'new', size: '15 KB' },
      { name: 'src/app/api/memory/store/route.ts', status: 'new', size: '2 KB' },
      { name: 'src/app/api/memory/recall/route.ts', status: 'new', size: '2 KB' },
      { name: 'src/app/api/memory/context/route.ts', status: 'new', size: '1.5 KB' },
      { name: 'src/app/api/memory/doc-read/route.ts', status: 'new', size: '3.5 KB' },
      { name: 'src/app/api/memory/session/route.ts', status: 'new', size: '3 KB' },
      { name: 'scripts/init-claude-memory.mjs', status: 'new', size: '13 KB' },
      { name: 'scripts/setup-complete.mjs', status: 'new', size: '15 KB' },
      { name: 'public/test-memory.html', status: 'new', size: '14 KB' },
      { name: 'src/lib/supabase-memory.ts', status: 'new', size: '500 B' },
      { name: 'CLAUDE-MEMORY-GUIDE.md', status: 'new', size: '11.7 KB' },
      { name: 'INSTALLATION-RAPIDE-MEMOIRE.md', status: 'new', size: '3.1 KB' },
      { name: 'SENTINEL-INSTRUCTIONS.md', status: 'modified', size: '3.1 KB' },
      { name: 'SENTINEL-COMMANDS.json', status: 'modified', size: '1.9 KB' },
      { name: 'SENTINEL-MESSAGE-TO-WORKER.md', status: 'new', size: '4 KB' },
      { name: 'WORKER-STATUS.md', status: 'new', size: '1.4 KB' }
    ];

    function renderTimeline() {
      const timeline = document.getElementById('timeline');
      timeline.innerHTML = activities.map(activity => `
        <div class="timeline-item">
          <div class="timeline-dot ${activity.type}"></div>
          <div class="timeline-content">
            <div class="timeline-time">${activity.time}</div>
            <div class="timeline-text">${activity.text}</div>
            ${activity.file ? `<div class="timeline-file">${activity.file}</div>` : ''}
          </div>
        </div>
      `).join('');
    }

    function renderFileList() {
      const fileList = document.getElementById('fileList');
      fileList.innerHTML = files.map(file => `
        <div class="file-item">
          <div>
            <div class="file-name">${file.name}</div>
            <div style="font-size: 11px; color: #64748b; margin-top: 4px;">${file.size}</div>
          </div>
          <div class="file-badge badge-${file.status}">
            ${file.status === 'new' ? '‚ú® NEW' : 'üìù MODIFIED'}
          </div>
        </div>
      `).join('');
    }

    function updateStats() {
      // Simulated real-time updates
      const filesCreatedEl = document.getElementById('filesCreated');
      const currentCount = parseInt(filesCreatedEl.textContent);

      // Random chance to update (simulating detection)
      if (Math.random() > 0.7) {
        filesCreatedEl.textContent = currentCount;
        // Add animation
        filesCreatedEl.style.transform = 'scale(1.2)';
        setTimeout(() => {
          filesCreatedEl.style.transform = 'scale(1)';
        }, 300);
      }
    }

    function refreshData() {
      const btn = event.target;
      btn.textContent = '‚è≥ Rafra√Æchissement...';
      btn.disabled = true;

      setTimeout(() => {
        renderTimeline();
        renderFileList();
        btn.textContent = 'üîÑ Rafra√Æchir';
        btn.disabled = false;

        // Add new alert
        const alerts = document.getElementById('alerts');
        const newAlert = document.createElement('div');
        newAlert.className = 'alert alert-success';
        newAlert.textContent = '‚úÖ Donn√©es mises √† jour';
        alerts.insertBefore(newAlert, alerts.firstChild);

        setTimeout(() => {
          newAlert.remove();
        }, 3000);
      }, 1000);
    }

    function approveCommit() {
      if (confirm('√ätes-vous s√ªr de vouloir approuver le commit?')) {
        alert('‚úÖ Commit approuv√©! Le Worker peut maintenant commiter les changements.');
      }
    }

    function stopWorker() {
      if (confirm('‚ö†Ô∏è √ätes-vous s√ªr de vouloir arr√™ter le Worker?')) {
        const badge = document.getElementById('workerStatusBadge');
        badge.className = 'worker-status status-blocked';
        badge.textContent = 'üõë ARR√äT√â';

        // Add alert
        const alerts = document.getElementById('alerts');
        const newAlert = document.createElement('div');
        newAlert.className = 'alert alert-danger';
        newAlert.textContent = 'üõë Worker arr√™t√© par le Sentinel';
        alerts.insertBefore(newAlert, alerts.firstChild);
      }
    }

    // Initialize
    renderTimeline();
    renderFileList();

    // Auto-refresh stats every 3 seconds
    setInterval(updateStats, 3000);

    // Add new activity periodically (simulation)
    setInterval(() => {
      if (Math.random() > 0.8) {
        const newActivity = {
          time: new Date().toLocaleTimeString('fr-FR', { hour: '2-digit', minute: '2-digit' }),
          type: 'created',
          text: 'Fichier d√©tect√©: test-' + Date.now() + '.md',
          file: 'test-' + Date.now() + '.md'
        };
        activities.unshift(newActivity);
        if (activities.length > 20) activities.pop();
        renderTimeline();
      }
    }, 10000);
  </script>
</body>
</html>
